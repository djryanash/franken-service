============= i-<inst-redacted> ==============
----------------------------------------
/var/log/eb-engine.log
----------------------------------------
2025/02/22 05:44:12.106046 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/02/22 05:44:12.122001 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2025/02/22 05:44:12.122021 [INFO] Executing instruction: FlipApplication
2025/02/22 05:44:12.122025 [INFO] fetching environment variables...
2025/02/22 05:44:12.122097 [INFO] found go.mod file
2025/02/22 05:44:12.122215 [INFO] Purge old process...
2025/02/22 05:44:12.122227 [INFO] Removing /var/app/current/ if it exists
2025/02/22 05:44:12.122234 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/02/22 05:44:12.122249 [INFO] Register application processes...
2025/02/22 05:44:12.122252 [INFO] Registering the proc: web

2025/02/22 05:44:12.122261 [INFO] Running command: systemctl show -p PartOf web.service
2025/02/22 05:44:12.136404 [INFO] Running command: systemctl daemon-reload
2025/02/22 05:44:12.464941 [INFO] Running command: systemctl reset-failed
2025/02/22 05:44:12.474832 [INFO] Running command: systemctl is-enabled eb-app.target
2025/02/22 05:44:12.483422 [INFO] Copying file /opt/elasticbeanstalk/config/private/aws-eb.target to /etc/systemd/system/eb-app.target
2025/02/22 05:44:12.484899 [INFO] Running command: systemctl enable eb-app.target
2025/02/22 05:44:12.831228 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/eb-app.target → /etc/systemd/system/eb-app.target.

2025/02/22 05:44:12.831262 [INFO] Running command: systemctl start eb-app.target
2025/02/22 05:44:12.841947 [INFO] Running command: systemctl enable web.service
2025/02/22 05:44:13.168432 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/02/22 05:44:13.168467 [INFO] Running command: systemctl show -p PartOf web.service
2025/02/22 05:44:13.181844 [INFO] Running command: systemctl is-active web.service
2025/02/22 05:44:13.190936 [INFO] Running command: systemctl start web.service
2025/02/22 05:44:13.280718 [INFO] Executing instruction: start X-Ray
2025/02/22 05:44:13.280777 [INFO] X-Ray is not enabled.
2025/02/22 05:44:13.280785 [INFO] Executing instruction: start proxy with new configuration
2025/02/22 05:44:13.280810 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/02/22 05:44:13.332245 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/02/22 05:44:13.332363 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/02/22 05:44:13.338559 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/02/22 05:44:13.359558 [INFO] Running command: systemctl daemon-reload
2025/02/22 05:44:13.695474 [INFO] Running command: systemctl reset-failed
2025/02/22 05:44:13.705235 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/02/22 05:44:13.729300 [INFO] Running command: systemctl is-active nginx.service
2025/02/22 05:44:13.754250 [INFO] Running command: systemctl start nginx.service
2025/02/22 05:44:13.892586 [INFO] Executing instruction: configureSqsd
2025/02/22 05:44:13.892607 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/02/22 05:44:13.892612 [INFO] Executing instruction: startSqsd
2025/02/22 05:44:13.892615 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/02/22 05:44:13.892619 [INFO] Executing instruction: Track pids in healthd
2025/02/22 05:44:13.892623 [INFO] This is an enhanced health env...
2025/02/22 05:44:13.892635 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -<inst-redacted>
2025/02/22 05:44:13.906816 [INFO] nginx.service healthd.service cfn-hup.service

2025/02/22 05:44:13.906848 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -<inst-redacted>
2025/02/22 05:44:13.919370 [INFO] web.service

2025/02/22 05:44:13.919694 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/02/22 05:44:13.919760 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/02/22 05:44:13.919838 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/02/22 05:44:13.919842 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/02/22 05:44:13.919847 [INFO] Executing cleanup logic
2025/02/22 05:44:13.919937 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1740203048675,"severity":"INFO"},{"msg":"Instance deployment found and used the 'go.mod' file in your source bundle.","timestamp":1740203052122,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1740203053919,"severity":"INFO"}]}]}

2025/02/22 05:44:13.920088 [INFO] Platform Engine finished execution on command: app-deploy

2025/02/22 05:45:28.478118 [INFO] Starting...
2025/02/22 05:45:28.478169 [INFO] Starting EBPlatform-PlatformEngine
2025/02/22 05:45:28.478190 [INFO] reading event message file
2025/02/22 05:45:28.479333 [INFO] Engine received EB command cfn-hup-exec

2025/02/22 05:45:28.569340 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s <arn-redacted>
2025/02/22 05:45:29.669493 [INFO] checking whether command tail-log is applicable to this instance...
2025/02/22 05:45:29.669508 [INFO] this command is applicable to the instance, thus instance should execute command
2025/02/22 05:45:29.669511 [INFO] Engine command: (tail-log)

2025/02/22 05:45:29.740856 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment completed successfully.","timestamp":1740203129740,"severity":"INFO"}]}]}

2025/02/22 05:45:29.740873 [INFO] Platform Engine finished execution on command: tail-log

2025/02/22 07:05:22.315400 [INFO] Starting...
2025/02/22 07:05:22.315499 [INFO] Starting EBPlatform-PlatformEngine
2025/02/22 07:05:22.315523 [INFO] reading event message file
2025/02/22 07:05:22.316009 [INFO] Engine received EB command cfn-hup-exec

2025/02/22 07:05:22.423362 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s <arn-redacted>
2025/02/22 07:05:23.277430 [INFO] checking whether command tail-log is applicable to this instance...
2025/02/22 07:05:23.277457 [INFO] this command is applicable to the instance, thus instance should execute command
2025/02/22 07:05:23.277475 [INFO] Engine command: (tail-log)

2025/02/22 07:05:23.277547 [INFO] Executing instruction: GetTailLogs
2025/02/22 07:05:23.277551 [INFO] Tail Logs...
2025/02/22 07:05:23.278122 [INFO] Running command: tail -n 100 /var/log/eb-engine.log


----------------------------------------
/var/log/eb-hooks.log
----------------------------------------


----------------------------------------
/var/log/nginx/access.log
----------------------------------------
<ip-redacted> - - [22/Feb/2025:06:52:53 +0000] "GET / HTTP/1.1" 502 150 "-" "ELB-HealthChecker/2.0" "-"
...lots more 502 errors...
<ip-redacted> - - [22/Feb/2025:07:05:20 +0000] "GET / HTTP/1.1" 502 150 "-" "ELB-HealthChecker/2.0" "-"


----------------------------------------
/var/log/nginx/error.log
----------------------------------------
2025/02/22 06:52:53 [error] 2255#2255: *1109 connect() failed (111: Connection refused) while connecting to upstream, client: <ip-redacted>, server: , request: "GET / HTTP/1.1", upstream: "http://<ip-redacted>:5000/", host: "<ip-redacted>"
...many more of the same error...
2025/02/22 07:05:20 [error] 2255#2255: *1307 connect() failed (111: Connection refused) while connecting to upstream, client: <ip-redacted>, server: , request: "GET / HTTP/1.1", upstream: "http://<ip-redacted>:5000/", host: "<ip-redacted>"


----------------------------------------
/var/log/web.stdout.log
----------------------------------------
Feb 22 05:44:13 ip-<ip-redacted> web[2211]: [GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.
Feb 22 05:44:13 ip-<ip-redacted> web[2211]: [GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
Feb 22 05:44:13 ip-<ip-redacted> web[2211]: - using env:#<inst-redacted> GIN_MODE=release
Feb 22 05:44:13 ip-<ip-redacted> web[2211]: - using code:#<inst-redacted>.SetMode(gin.ReleaseMode)
Feb 22 05:44:13 ip-<ip-redacted> web[2211]: [GIN-debug] GET    /                         --> main.main.(*RouterGroup).StaticFile.<inst-redacted> (3 handlers)
Feb 22 05:44:13 ip-<ip-redacted> web[2211]: [GIN-debug] HEAD   /                         --> main.main.(*RouterGroup).StaticFile.<inst-redacted> (3 handlers)
Feb 22 05:44:13 ip-<ip-redacted> web[2211]: [GIN-debug] GET    /albums                   --> main.getAlbums (3 handlers)
Feb 22 05:44:13 ip-<ip-redacted> web[2211]: [GIN-debug] GET    /albums/:id               --> main.getAlbumByID (3 handlers)
Feb 22 05:44:13 ip-<ip-redacted> web[2211]: [GIN-debug] POST   /albums                   --> main.postAlbums (3 handlers)
Feb 22 05:44:13 ip-<ip-redacted> web[2211]: [GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Feb 22 05:44:13 ip-<ip-redacted> web[2211]: Please check <link-redacted>/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.
Feb 22 05:44:13 ip-<ip-redacted> web[2211]: [GIN-debug] Listening and serving HTTP on localhost:8080