Retrieving logs...
============= i-<redacted> ==============
----------------------------------------
/var/log/web.stdout.log
----------------------------------------
Feb 21 06:57:58 <ip-redacted> web[2213]: [GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.
Feb 21 06:57:58 <ip-redacted> web[2213]: [GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
Feb 21 06:57:58 <ip-redacted> web[2213]: - using env:#011export GIN_MODE=release
Feb 21 06:57:58 <ip-redacted> web[2213]: - using code:#011gin.SetMode(gin.ReleaseMode)
Feb 21 06:57:58 <ip-redacted> web[2213]: [GIN-debug] GET    /                         --> main.main.(*RouterGroup).StaticFile.func1 (3 handlers)
Feb 21 06:57:58 <ip-redacted> web[2213]: [GIN-debug] HEAD   /                         --> main.main.(*RouterGroup).StaticFile.func1 (3 handlers)
Feb 21 06:57:58 <ip-redacted> web[2213]: [GIN-debug] GET    /albums                   --> main.getAlbums (3 handlers)
Feb 21 06:57:58 <ip-redacted> web[2213]: [GIN-debug] GET    /albums/:id               --> main.getAlbumByID (3 handlers)
Feb 21 06:57:58 <ip-redacted> web[2213]: [GIN-debug] POST   /albums                   --> main.postAlbums (3 handlers)
Feb 21 06:57:58 <ip-redacted> web[2213]: [GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Feb 21 06:57:58 <ip-redacted> web[2213]: Please check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.
Feb 21 06:57:58 <ip-redacted> web[2213]: [GIN-debug] Listening and serving HTTP on localhost:8080


----------------------------------------
/var/log/eb-engine.log
----------------------------------------
2025/02/21 06:57:56.033746 [INFO] Generating rsyslog config from Procfile
2025/02/21 06:57:56.036801 [INFO] Running command: systemctl restart rsyslog.service
2025/02/21 06:57:56.528051 [INFO] Executing instruction: PostBuildEbExtension
2025/02/21 06:57:56.528080 [INFO] Starting executing the config set Infra-EmbeddedPostBuild.
2025/02/21 06:57:56.528095 [INFO] Running command: /opt/aws/bin/cfn-init -s arn:aws:cloudformation:<region-redacted>:<redacted>:stack/<edacted>-stack/<edacted> -r AWSEBAutoScalingGroup --region <region-redacted> --configsets Infra-EmbeddedPostBuild
2025/02/21 06:57:56.989375 [INFO] Finished executing the config set Infra-EmbeddedPostBuild.

2025/02/21 06:57:56.989413 [INFO] Executing instruction: CleanEbExtensions
2025/02/21 06:57:56.989441 [INFO] Cleaned ebextensions subdirectories from app staging directory.
2025/02/21 06:57:56.989444 [INFO] Executing instruction: RunAppDeployPreDeployHooks
2025/02/21 06:57:56.989472 [INFO] Executing platform hooks in .platform/hooks/predeploy/
2025/02/21 06:57:56.989487 [INFO] The dir .platform/hooks/predeploy/ does not exist
2025/02/21 06:57:56.989490 [INFO] Finished running scripts in /var/app/staging/.platform/hooks/predeploy
2025/02/21 06:57:56.989496 [INFO] Executing instruction: stop X-Ray
2025/02/21 06:57:56.989499 [INFO] stop X-Ray ...
2025/02/21 06:57:56.989510 [INFO] Running command: systemctl show -p PartOf xray.service
2025/02/21 06:57:57.003982 [WARN] stopProcess Warning: process xray is not registered 
2025/02/21 06:57:57.004014 [INFO] Running command: systemctl stop xray.service
2025/02/21 06:57:57.018689 [INFO] Executing instruction: stop proxy
2025/02/21 06:57:57.018715 [INFO] Running command: systemctl show -p PartOf httpd.service
2025/02/21 06:57:57.028376 [WARN] deregisterProcess Warning: process httpd is not registered, skipping...

2025/02/21 06:57:57.028410 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/02/21 06:57:57.041935 [WARN] deregisterProcess Warning: process nginx is not registered, skipping...

2025/02/21 06:57:57.041962 [INFO] Executing instruction: FlipApplication
2025/02/21 06:57:57.041966 [INFO] fetching environment variables...
2025/02/21 06:57:57.041986 [INFO] found go.mod file
2025/02/21 06:57:57.042124 [INFO] Purge old process...
2025/02/21 06:57:57.042138 [INFO] Removing /var/app/current/ if it exists
2025/02/21 06:57:57.042148 [INFO] Renaming /var/app/staging/ to /var/app/current/
2025/02/21 06:57:57.042169 [INFO] Register application processes...
2025/02/21 06:57:57.042178 [INFO] Registering the proc: web

2025/02/21 06:57:57.042189 [INFO] Running command: systemctl show -p PartOf web.service
2025/02/21 06:57:57.064592 [INFO] Running command: systemctl daemon-reload
2025/02/21 06:57:57.378277 [INFO] Running command: systemctl reset-failed
2025/02/21 06:57:57.386933 [INFO] Running command: systemctl is-enabled eb-app.target
2025/02/21 06:57:57.394284 [INFO] Copying file /opt/elasticbeanstalk/config/private/aws-eb.target to /etc/systemd/system/eb-app.target
2025/02/21 06:57:57.395243 [INFO] Running command: systemctl enable eb-app.target
2025/02/21 06:57:57.683881 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/eb-app.target → /etc/systemd/system/eb-app.target.

2025/02/21 06:57:57.683915 [INFO] Running command: systemctl start eb-app.target
2025/02/21 06:57:57.694002 [INFO] Running command: systemctl enable web.service
2025/02/21 06:57:58.017491 [INFO] Created symlink /etc/systemd/system/multi-user.target.wants/web.service → /etc/systemd/system/web.service.

2025/02/21 06:57:58.017529 [INFO] Running command: systemctl show -p PartOf web.service
2025/02/21 06:57:58.029177 [INFO] Running command: systemctl is-active web.service
2025/02/21 06:57:58.036507 [INFO] Running command: systemctl start web.service
2025/02/21 06:57:58.086828 [INFO] Executing instruction: start X-Ray
2025/02/21 06:57:58.086856 [INFO] X-Ray is not enabled.
2025/02/21 06:57:58.086860 [INFO] Executing instruction: start proxy with new configuration
2025/02/21 06:57:58.086887 [INFO] Running command: /usr/sbin/nginx -t -c /var/proxy/staging/nginx/nginx.conf
2025/02/21 06:57:58.140849 [INFO] nginx: [warn] could not build optimal types_hash, you should increase either types_hash_max_size: 1024 or types_hash_bucket_size: 64; ignoring types_hash_bucket_size
nginx: the configuration file /var/proxy/staging/nginx/nginx.conf syntax is ok
nginx: configuration file /var/proxy/staging/nginx/nginx.conf test is successful

2025/02/21 06:57:58.140998 [INFO] Running command: cp -rp /var/proxy/staging/nginx/* /etc/nginx
2025/02/21 06:57:58.146665 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/02/21 06:57:58.170580 [INFO] Running command: systemctl daemon-reload
2025/02/21 06:57:58.488121 [INFO] Running command: systemctl reset-failed
2025/02/21 06:57:58.497389 [INFO] Running command: systemctl show -p PartOf nginx.service
2025/02/21 06:57:58.511489 [INFO] Running command: systemctl is-active nginx.service
2025/02/21 06:57:58.520712 [INFO] Running command: systemctl start nginx.service
2025/02/21 06:57:58.658150 [INFO] Executing instruction: configureSqsd
2025/02/21 06:57:58.658171 [INFO] This is a web server environment instance, skip configure sqsd daemon ...
2025/02/21 06:57:58.658175 [INFO] Executing instruction: startSqsd
2025/02/21 06:57:58.658178 [INFO] This is a web server environment instance, skip start sqsd daemon ...
2025/02/21 06:57:58.658182 [INFO] Executing instruction: Track pids in healthd
2025/02/21 06:57:58.658186 [INFO] This is an enhanced health env...
2025/02/21 06:57:58.658199 [INFO] Running command: systemctl show -p ConsistsOf aws-eb.target | cut -d= -f2
2025/02/21 06:57:58.668888 [INFO] healthd.service cfn-hup.service nginx.service

2025/02/21 06:57:58.668917 [INFO] Running command: systemctl show -p ConsistsOf eb-app.target | cut -d= -f2
2025/02/21 06:57:58.678310 [INFO] web.service

2025/02/21 06:57:58.678569 [INFO] Executing instruction: RunAppDeployPostDeployHooks
2025/02/21 06:57:58.678631 [INFO] Executing platform hooks in .platform/hooks/postdeploy/
2025/02/21 06:57:58.678642 [INFO] The dir .platform/hooks/postdeploy/ does not exist
2025/02/21 06:57:58.678645 [INFO] Finished running scripts in /var/app/current/.platform/hooks/postdeploy
2025/02/21 06:57:58.678649 [INFO] Executing cleanup logic
2025/02/21 06:57:58.678742 [INFO] CommandService Response: {"status":"SUCCESS","api_version":"1.0","results":[{"status":"SUCCESS","msg":"Engine execution has succeeded.","returncode":0,"events":[{"msg":"Instance deployment used the commands in your 'Procfile' to initiate startup of your application.","timestamp":1740121073639,"severity":"INFO"},{"msg":"Instance deployment found and used the 'go.mod' file in your source bundle.","timestamp":1740121077041,"severity":"INFO"},{"msg":"Instance deployment completed successfully.","timestamp":1740121078678,"severity":"INFO"}]}]}

2025/02/21 06:57:58.678892 [INFO] Platform Engine finished execution on command: app-deploy

2025/02/21 07:28:32.061240 [INFO] Starting...
2025/02/21 07:28:32.061296 [INFO] Starting EBPlatform-PlatformEngine
2025/02/21 07:28:32.061322 [INFO] reading event message file
2025/02/21 07:28:32.061652 [INFO] Engine received EB command cfn-hup-exec

2025/02/21 07:28:32.135747 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:<region-redacted>:<redacted>:stack/<edacted>-stack/<edacted> -r AWSEBAutoScalingGroup --region <region-redacted>
2025/02/21 07:28:32.508920 [INFO] Running command: /opt/aws/bin/cfn-get-metadata -s arn:aws:cloudformation:<region-redacted>:<redacted>:stack/<edacted>-stack/<edacted> -r AWSEBBeanstalkMetadata --region <region-redacted>
2025/02/21 07:28:32.930240 [INFO] checking whether command tail-log is applicable to this instance...
2025/02/21 07:28:32.930254 [INFO] this command is applicable to the instance, thus instance should execute command
2025/02/21 07:28:32.930258 [INFO] Engine command: (tail-log)

2025/02/21 07:28:32.930904 [INFO] Executing instruction: GetTailLogs
2025/02/21 07:28:32.930911 [INFO] Tail Logs...
2025/02/21 07:28:32.934301 [INFO] Running command: tail -n 100 /var/log/web.stdout.log
2025/02/21 07:28:32.945048 [INFO] Running command: tail -n 100 /var/log/eb-engine.log


----------------------------------------
/var/log/eb-hooks.log
----------------------------------------


----------------------------------------
/var/log/nginx/access.log
----------------------------------------
<ip-###.##.##.##> - - [21/Feb/2025:07:16:37 +0000] "GET / HTTP/1.1" 502 150 "-" "ELB-HealthChecker/2.0" "-"
<ip-###.##.##.##> - - [21/Feb/2025:07:16:49 +0000] "GET / HTTP/1.1" 502 150 "-" "ELB-HealthChecker/2.0" "-"
...all calls are rejected with 502...
<ip-###.##.##.##> - - [21/Feb/2025:07:28:20 +0000] "GET / HTTP/1.1" 502 150 "-" "ELB-HealthChecker/2.0" "-"
<ip-###.##.##.##> - - [21/Feb/2025:07:28:22 +0000] "GET / HTTP/1.1" 502 150 "-" "ELB-HealthChecker/2.0" "-"


----------------------------------------
/var/log/nginx/error.log
----------------------------------------
2025/02/21 07:16:37 [error] 2257#2257: *297 connect() failed (111: Connection refused) while connecting to upstream, client: <ip-###.##.##.##>, server: , request: "GET / HTTP/1.1", upstream: "http://<ip-###.##.##.##>:5000/", host: "<ip-###.##.##.##>"
2025/02/21 07:16:49 [error] 2257#2257: *299 connect() failed (111: Connection refused) while connecting to upstream, client: <ip-###.##.##.##>, server: , request: "GET / HTTP/1.1", upstream: "http://<ip-###.##.##.##>:5000/", host: "<ip-###.##.##.##>"
...
2025/02/21 07:28:20 [error] 2257#2257: *493 connect() failed (111: Connection refused) while connecting to upstream, client: <ip-###.##.##.##>, server: , request: "GET / HTTP/1.1", upstream: "http://<ip-###.##.##.##>:5000/", host: "<ip-###.##.##.##>"
2025/02/21 07:28:22 [error] 2257#2257: *495 connect() failed (111: Connection refused) while connecting to upstream, client: <ip-###.##.##.##>, server: , request: "GET / HTTP/1.1", upstream: "http://<ip-###.##.##.##>:5000/", host: "<ip-###.##.##.##>"


